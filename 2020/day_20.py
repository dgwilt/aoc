#!/usr/bin/env python3 
from itertools import combinations, product
from collections import defaultdict
from sys import argv
from aoc import AocDay, prod

class AocDay20(AocDay):

    def setup(self,data):
        tiledata = data.split("\n\n")
        rr90 = lambda t: list(list(i) for i in zip(*t[::-1]))
        self.transforms = [
            rr90,
            lambda t: t,
            lambda t: t[::-1],
            lambda t: [[t[x][y] for x in range(len(t[0]))] for y in range(len(t))],
            lambda t: [[t[len(t[0])-x-1][len(t)-y-1] for x in range(len(t[0]))] for y in range(len(t))],
            lambda t: [row[::-1] for row in t],
            lambda t: rr90(rr90(rr90(t))),
            lambda t: rr90(rr90(t)),
        ]

        tiles = []
        tid = 0
        for tile in tiledata:
            tilerows = tile.splitlines()
            tnum = int(tilerows[0].split()[1][:-1])
            for fn in self.transforms:
                rotated = fn(tilerows[1:])
                t = rotated[0]
                b = rotated[-1]
                l = [row[0] for row in rotated]
                r = [row[-1] for row in rotated]
                tiles.append((
                    tnum,
                    [row[1:-1] for row in rotated[1:-1]],
                    {'l':"".join(l),'r':"".join(r),'t':"".join(t),'b':"".join(b)},
                    tid))
                tid += 1

        puzzle = defaultdict(lambda:{'l':None,'r':None,'t':None,'b':None})
        for (n1,_,map1,id1),(n2,_,map2,id2) in combinations(tiles,2):
            if n1 != n2:
                for adjacent in ("lr","bt"):
                    for dir1,dir2 in (adjacent,adjacent[::-1]):
                        if map1[dir1] == map2[dir2]:
                            puzzle[id1][dir1] = id2
                            puzzle[id2][dir2] = id1
        return tiles, puzzle

    def run_silver(self,data):
        tiles, puzzle = self.setup(data)
        corners = set.union(*[set([tiles[id][0] for id in puzzle.keys() if not any(puzzle[id][x] for x in corner)]) for corner in product('tb','lr')])
        return prod(corners)

    def run_gold(self,data):
        tiles, puzzle = self.setup(data)
        tdim = len(tiles[0][1])
        
        topleft = [id for id in puzzle.keys() if not any(puzzle[id][x] for x in 'tl')][0]
        grid = []
        while cur := topleft:
            row = [""] * tdim
            while cur:
                row = [row[i] + "".join(r) for i,r in enumerate(tiles[cur][1])]
                cur = puzzle[cur]['r']
            grid.extend(row)
            topleft = puzzle[topleft]['b']

        xdim = len(grid[0])
        ydim = len(grid)
        total_pixels = sum(row.count("#") for row in grid)

        monster = """
                  # 
#    ##    ##    ###
 #  #  #  #  #  #   """.splitlines()[1:]
        monster_pixels = sum(row.count("#") for row in monster)

        mxdim = len(monster[0])
        mydim = len(monster)
        pixels = [(x,y) for x,y in product(range(mxdim),range(mydim)) if monster[y][x] == "#"]

        for fn in self.transforms:
            picture = fn(grid)
            monsters = sum(all(picture[yo+y][xo+x] == "#" for x,y in pixels) for xo,yo in product(range(xdim-mxdim),range(ydim-mydim)))
            if monsters:
                return total_pixels - (monster_pixels * monsters)

    def run_gold_orig(self,data):
        tiles, puzzle = self.setup(data)
        tdim = len(tiles[0][1])
        
        topleft = [id for id in puzzle.keys() if not any(x in puzzle[id] for x in 'tl')][0]
        grid = []
        while True:
            cur = topleft
            row = [""] * tdim
            while True:
                row = [row[i] + "".join(r) for i,r in enumerate(tiles[cur][1])]
                if 'r' not in puzzle[cur]: break
                cur = puzzle[cur]['r']
            grid.extend(row)
            if 'b' not in puzzle[topleft]: break
            topleft = puzzle[topleft]['b']

        xdim = len(grid[0])
        ydim = len(grid)
        total_pixels = sum(row.count("#") for row in grid)

        monster = """
                  # 
#    ##    ##    ###
 #  #  #  #  #  #   """.splitlines()[1:]
        monster_pixels = sum(row.count("#") for row in monster)

        mxdim = len(monster[0])
        mydim = len(monster)
        pixels = [(x,y) for x,y in product(range(mxdim),range(mydim)) if monster[y][x] == "#"]

        for fn in self.transforms:
            picture = fn(grid)
            monsters = sum(all(picture[yo+y][xo+x] == "#" for x,y in pixels) for xo,yo in product(range(xdim-mxdim),range(ydim-mydim)))
            if monsters:
                return total_pixels - (monster_pixels * monsters)

if __name__ == "__main__":

    data = """Tile 3041:
#..##.#...
..#....###
.#..#.#.##
..#.......
#.#..###.#
.#....#..#
.........#
#...##.###
#.....###.
...##..#..

Tile 1747:
##..######
#####...##
..#.....##
#...##.###
#........#
###.#..#.#
#.##...#..
#..#.....#
#.#..#...#
#.#.#..###

Tile 2887:
##....#..#
##....#...
#...#..#..
...###.#..
.....#.##.
.....#....
##.##....#
#.......#.
###....##.
##..##.#.#

Tile 3001:
##.#.#.#..
##...####.
##....#.##
....##....
.......##.
#..#..#...
###..#.#.#
###....###
####...###
##..##.#.#

Tile 2267:
##.#.#.###
##....#..#
#..#....#.
..#.##..#.
##..#..#..
...#......
#.#.#.....
##........
...#.#..##
..##.#..#.

Tile 2797:
#.##.#...#
.......#..
#....#....
##..##.#.#
#......##.
.#.##.#.##
#......##.
####....#.
#.##....#.
####.#.###

Tile 1087:
#.#######.
##..##..#.
#.......##
.....#....
##...#...#
#....#...#
.##......#
.#..#.#..#
#...#..##.
.##..##.##

Tile 2237:
.#..####..
...####.##
##...#..#.
#..#.#...#
##.#......
.##.#..#.#
.#..##...#
...#....##
.....##...
.....##..#

Tile 3673:
##.###...#
#.##..#..#
#..####...
.#.####...
.....#.#.#
#..#..#...
###.......
#.#.......
#.......#.
##..###..#

Tile 1907:
...#.#.###
#.##.....#
.......##.
.##.#...#.
..#.##....
##..##....
#.........
##.#......
.......#..
#.#.###...

Tile 2437:
#.##.##..#
....#.....
..#......#
#...#.....
...#......
.....#...#
#.#.......
.#...#...#
#.#....#..
.##..##...

Tile 2897:
##..#...#.
..###....#
...#.##...
....#.##..
...##.....
#..#..#.##
..###.....
...##..##.
#..#......
#.#.##..#.

Tile 1103:
.####.#..#
..##...#..
#.....#...
##.#.....#
#.##......
.##...#..#
##.....#.#
##.....###
#.....#...
##.#...##.

Tile 1559:
...##..#.#
#..###...#
...##...##
#..#.#.#..
#......#.#
#..#.#.#.#
.#..#....#
....#..###
..##..##..
.#..##..##

Tile 3931:
##....##.#
.##..#...#
.......#..
#....#.#..
#.#..##.#.
.##.####..
.......#.#
.....#.#..
.#.#......
####..#.##

Tile 3331:
#.#.####..
.#.##...##
....####.#
.##......#
#.##.##..#
##..#...#.
#.##....#.
#.#.#.#.#.
...#......
###.##.##.

Tile 2089:
..########
##.#...##.
#...#.....
##......##
##..##..#.
..#.#....#
#..##....#
#..#.#...#
##..#....#
..######.#

Tile 1069:
.####..###
......##..
....#.##.#
#..#.....#
#...#...#.
#...#.##.#
...#.#...#
#.#.......
#.#.##.#.#
#..#.#.#..

Tile 1831:
#..#..##..
#...##...#
..##...#.#
#.......##
#........#
..#.......
##..###..#
#....###.#
...#......
##..#.....

Tile 1453:
.#.#.#..##
##.##...##
#....#....
#..#..#.#.
##.#..###.
...##.##..
....##..##
...##..###
##........
..##.#####

Tile 3767:
..#.#.#.#.
..........
#....#.#.#
#.....#..#
##..#..#..
...#..#..#
..#....#..
......#...
#..##.....
.#....##.#

Tile 1693:
#.###..###
#...#...##
#......###
#....#...#
......#..#
###...#...
####..##..
...#..#...
##..##.###
#....#.##.

Tile 3631:
....#.##..
..#...#...
#.###..#..
....#.#..#
#..#..##..
#....#.#..
#.##..#...
#........#
.....#...#
...#......

Tile 2999:
#...###..#
#.#.##....
#.........
##.......#
#.#.##.###
.....##.##
.#.##..##.
#...###.##
.#.....#..
..#.#.###.

Tile 2417:
..#.#.#...
##.#..#.##
#.##....#.
#.........
...#..#...
.#...#.###
.#.###...#
#........#
#.#..#....
#.##.#...#

Tile 3919:
##........
#.#.......
.#.#.#....
...#...#.#
...#...##.
##.....###
#.#.#.#...
###.#.....
.#.#..#.##
##.#...##.

Tile 3557:
##.#.###..
.##...#..#
.#.#...#..
....###...
.....#####
###.#....#
.#..##..#.
#..#....#.
..........
....###.#.

Tile 3851:
.##.###.##
..#......#
......#..#
#.#.......
......##..
##...#....
..#..#...#
...#.#....
.........#
.#.##..###

Tile 1013:
##.##.##..
##........
...#......
#.....#...
#.#..#...#
.#......##
...##.#.##
..#..##..#
.#...#..#.
..#..###.#

Tile 1549:
..#...##.#
..#......#
##....#.#.
.......##.
..#...#..#
#.#..#..##
.......#.#
.......#.#
#...##...#
.######...

Tile 2179:
.##.##.#..
.##.###...
.........#
..#..#..#.
..#####...
...#..#..#
...#....##
#........#
#.........
###.###...

Tile 1697:
###..###.#
##...#....
####...#.#
.#.....##.
....####.#
#....##.##
..#.##...#
.........#
###..##.##
#..##.####

Tile 1307:
##......#.
..........
....#....#
#...#.#.#.
.###.....#
#..##.#..#
..........
.....##.#.
...####..#
..#..#.#..

Tile 3929:
###.#.##..
##........
###....###
...#..#..#
...#.....#
..#.###...
..........
.....#...#
#.......##
##....#.#.

Tile 1949:
..####.#.#
.#..#...#.
#..#....##
#.....###.
.........#
..#..#...#
.....##...
.....#....
.#.#.#.#..
####.#####

Tile 2081:
##.##.####
.#........
#...#.....
.#.##..#.#
....###..#
..#..#.#..
#.#.#.##.#
..#..#..#.
#...#.#...
.##.#.####

Tile 1433:
#####.##..
#.....#...
####..#...
...####...
......#.##
..##...#..
#...#.#.#.
#....#..#.
#......#.#
##..###..#

Tile 3433:
#.......##
#....#....
#...#.#..#
..#.##...#
#...##.#.#
##.####..#
..##.###.#
#.#....#..
##.#.....#
.#....#..#

Tile 3607:
##.#.#.#.#
...#..#.#.
#.#..#.#..
#.......##
..#..##...
#.....#...
#...#..#.#
...#....##
#..#..#.##
##.#..#.#.

Tile 2677:
.###..#..#
###......#
..........
##..#...#.
##...#.#..
..#.......
#...#...#.
#......#.#
##.#.#.#.#
###...#...

Tile 3461:
...##...##
#.#...##.#
#.....##..
#..#....##
#.#....#.#
..##.##.#.
#.........
..#.#....#
#....##...
.#.##.####

Tile 3911:
#.#####.##
#..#.....#
#..#......
.##....##.
#..#..#..#
.....#.#.#
#.......##
......#...
####...##.
..#..#.#..

Tile 2729:
##..##.##.
.#..#...#.
#....###..
.....##...
#..#..#..#
....###..#
#....##.##
#..#.###..
#.....#...
...##.#...

Tile 2549:
.#.##.#...
#..#.#.#.#
.........#
.#..##..##
#....##...
##..#.##.#
.#...##...
#...#.....
..#.......
#....#....

Tile 1699:
.######..#
....###..#
.####..#..
#....#....
.##.#...#.
#.......#.
.#.#.##..#
#..#......
..........
#.##..##..

Tile 2221:
#...##.#..
....#....#
#...#....#
#........#
#.......##
##.#..#...
#.#.###..#
#..#.....#
......#.##
..#.####.#

Tile 2129:
....#####.
.##..#...#
......#.##
#.#...#...
#..#...###
###.#..#..
.....#...#
...#......
#...#.#...
#.###.###.

Tile 1973:
.......###
..........
#.#.#.....
.........#
....#..#..
...#...#..
##.....#.#
#..#...#.#
#.#......#
#...#.#.##

Tile 3943:
...###....
........##
.##.......
##.#....##
..#.#..#..
..##...#..
#.##....#.
.#####.#..
###..##.#.
...#..#.##

Tile 1451:
#..###..#.
#..#....##
....#...##
##.......#
#.........
..........
...#...#..
..#....##.
...#..#.#.
.##...##.#

Tile 1759:
.#..##...#
##........
##..#.....
..........
.###...###
..##..#..#
.......###
#..#..#..#
.##....#..
...##.#..#

Tile 2963:
##.##.#.#.
....#.....
#.....##.#
.##.#..#.#
.###..#.#.
#.##.##...
....#....#
#.....#...
.#.##.###.
.#..#.....

Tile 3313:
#.#...#...
..##..#..#
#####.##.#
#.....##.#
..#..##..#
##.###....
...#.#....
.......#.#
##.....##.
#.#.#####.

Tile 3221:
.#...##...
#.##...###
####...##.
.##.......
##..#...#.
...#.#.###
#...##..#.
##...#..#.
#.#...##..
##...#.##.

Tile 3989:
###...#.##
#.......##
#.......#.
#...#....#
#.........
...#.##...
..#....#..
..........
.#......#.
#.##.###..

Tile 2069:
#..#..##.#
#.####....
#..#......
#..##..#.#
#......###
#...#.....
#...#..###
......##..
#..#.####.
#.#..#..#.

Tile 1871:
#.##..####
.#.##....#
###.#.#..#
#....#...#
......#.##
#.....####
#.....##.#
#...#....#
....#.....
.......#.#

Tile 2083:
.#.##.#...
#..####..#
##.#.##.##
..#.##....
#.#..##...
..#.#..#..
...#..#...
.#..#.##..
###..#.###
#...#.#...

Tile 2309:
.##.#...#.
#..##..#.#
...#......
.#..#.....
#..##...##
.#...#...#
...#.#....
.....##...
#.##....##
...##..###

Tile 3413:
.....####.
..#.###...
..#.#....#
##.##.....
..##...###
##..#.....
##.#.....#
###.######
#..##.....
#.#...#.#.

Tile 1039:
#.##.#.#..
#...#.#...
...####.#.
..#..#.#.#
...#.##..#
#...###..#
....#..#..
##....##.#
.#...#....
#...#.#..#

Tile 2029:
##..##.#..
#.........
#..#......
.##.......
.....#..#.
.##..##...
......#...
#....#.#.#
..##.#....
...#.#.#..

Tile 2281:
######.##.
#...##....
......#.#.
##..#.##..
#..####.##
#....#.#.#
#........#
........##
.##....##.
..###.....

Tile 3259:
#...##.#.#
...#....#.
..#.#...#.
###.......
.####.#.##
#..#...#.#
#....#.##.
#..###..#.
#.###..#.#
#.#...###.

Tile 2087:
###.###.#.
#.........
#.......#.
##....####
#.##...#..
#..##.#.##
.##...#...
.##..#..#.
#.....#...
##..#.#...

Tile 3391:
.##.#.#..#
##.#.#...#
#..#......
...#......
#..#......
..........
...###...#
.........#
##..#....#
..#.#....#

Tile 2693:
#...#.##..
#..##....#
.#.#....#.
#.#.#...#.
#.##.....#
...#......
..#.#.##.#
#.......#.
...#.....#
..###..##.

Tile 1279:
#.#.....##
.........#
#.#..#.#.#
#..#.....#
#..#......
###.....##
.###...#.#
#.##.....#
#.##......
.#..####..

Tile 2459:
####...#.#
#.#....#.#
#........#
.#........
##......#.
#...#.#..#
###....#..
..##.##..#
#.#.....##
#.#.#.....

Tile 2297:
.##.####..
#...#...##
##........
.##...#.#.
.....#.#.#
#........#
......#.#.
#...#...##
#.#.....##
.##..##..#

Tile 3217:
.##..##..#
#...#.#...
.#.##.#...
##.##....#
#...##..##
..###...#.
.........#
#..#.#....
.#..#...##
#....##..#

Tile 2467:
#.#.##.###
.....#...#
.#........
#...##.###
.#.......#
#...#.##.#
#....#....
#...#....#
...##.##.#
....#..#.#

Tile 2939:
##.###.#..
...#..#..#
.#..##....
#.#.......
##....#...
.##...##..
##.#.....#
#..#..#.##
..........
###..##.##

Tile 1459:
#.#.##.###
..##.#...#
#..#.#.##.
#....###..
##...#...#
.##.#.....
.##.#.##..
#.....#..#
#.#.##....
..#....##.

Tile 3583:
.#..#.#.##
#..###.#.#
.#....#...
.#.##....#
...#.....#
...#.#...#
....###...
.....#....
..#.......
.#.#.###..

Tile 3209:
#.#.######
.#....#.#.
..#.......
#.#.....##
#..#.....#
.#.......#
#.##.#....
....##....
.#.##.#.#.
#...#.#...

Tile 1471:
#.###..##.
........##
.#....##..
####.#...#
...#......
#....#....
#.....#.#.
#.#......#
##.#.##..#
.#.#.###.#

Tile 3533:
....#..#.#
###...#...
..#.#..#..
...#..#...
#.#.#..#.#
.#..##..#.
#..#.....#
.....#.#.#
........##
..#.#.##.#

Tile 2389:
.....##...
..#....#.#
....#...#.
#.....#...
#..#....##
#.#.#.....
#........#
#.........
....#.#...
....##..##

Tile 3023:
....#.###.
#...#.#.##
#.#.#.....
#..#.#..##
....#....#
....######
#...#.....
.#....#.##
#......#..
#.##...##.

Tile 1367:
.#...###..
#...##.##.
.#.....#.#
.#...#...#
####.#....
.##.......
.#.....#..
...#.....#
..#......#
###..#..#.

Tile 1789:
.##..#..##
....#.##..
.####.....
#...###..#
#..#..###.
.##.#.....
..#.##....
.....#....
.......#..
.#..##....

Tile 3011:
#.###..#.#
.....#...#
...#..#..#
#.###..#..
#..#.#..##
..##......
.#...#...#
...#..#...
.#.###...#
.#.##.....

Tile 3547:
.###.#...#
.##....#..
...#.##.##
#.#.......
.......#.#
......#..#
#..#...#..
...#.####.
#....##.#.
....#.##..

Tile 3671:
##.#..#.#.
##..##.#.#
...###....
#.#.###..#
#..#...#..
..#......#
#.#...####
.....#...#
.#...##..#
..###..#..

Tile 3529:
#.#.#..#.#
##.....#..
.##..#....
#.#....###
#.##.#..##
#....#.#.#
.....###.#
....#..#.#
.#..#....#
.###..##..

Tile 2251:
.####.#.##
#.....#...
.#...#.#.#
...##.....
##.......#
.....#....
...##....#
#..#..#...
#########.
#.........

Tile 2927:
.#...#####
.###..#...
...#...#..
##.#...##.
...#.....#
#.###...##
.....#..#.
#....###.#
#........#
.##..##...

Tile 3467:
#...#.#.##
.....#....
...###..##
#...#.#...
...#.#.#..
....#.....
.....#.#..
..#.#...#.
.....##...
#..#..#...

Tile 2341:
#.......##
..##..#.#.
.....##..#
#..###.#..
...##.....
##..#..#.#
###..#.#.#
.#..#..###
...#..##..
.#.#...###

Tile 1847:
#..##..###
#....#.#.#
.#..###...
#....#...#
#.#..##..#
##.####...
#.#.......
..........
.#..#...##
##..#..##.

Tile 1597:
#.#.#....#
#......###
.#..#....#
.#....####
#.#..#..##
#...#..#.#
#.##.##..#
###...#...
#..##.#...
.###..#.#.

Tile 2789:
.#####.#..
....#.....
.........#
#.##....#.
..#.#.#...
#...##....
#..#...#.#
#..#.....#
.....#....
.#..####.#

Tile 2441:
##.#.#....
#.#.......
.#...###..
..#....##.
.......#.#
.......#..
.#...##..#
####......
##..#....#
##.##.###.

Tile 1303:
.##...#...
#........#
###....#.#
.....#....
.....#....
#.....#..#
.........#
.####.#..#
..##...###
####..###.

Tile 2339:
..#..##.##
...#....##
##.#.#....
#..##.##.#
.####..#.#
#.........
.#...#..#.
......#..#
#..###...#
.##..#.#.#

Tile 3079:
####...#.#
...###..##
.........#
.##....#..
##..#..#..
...#..##.#
#.#....#..
##........
#.#.####..
###.#.#..#

Tile 1877:
..#.#.#..#
#.#.#.#...
#....##...
..##.#..##
##.#..#...
#..#......
#...#.#..#
.....###.#
..#..##..#
########.#

Tile 2663:
##.##....#
#......##.
#.#...#..#
##.###....
##..#.#.##
#...#..#..
#..#....#.
..#.#...##
#..##...##
.....###.#

Tile 1109:
###....##.
#........#
#.........
...#..####
..##..##.#
.....##..#
.#...#.#.#
#...#...##
..........
...#.#.###

Tile 2971:
...##.####
#..#....##
#...#.#.#.
#...#.##.#
...#.....#
.#........
#.....#.#.
.#####.#.#
##..#...#.
###.#..#.#

Tile 2053:
.###.###..
####.#..##
..#...##..
##....##.#
#.#..#.###
..#.......
.#.##...#.
#...##..##
..#...#..#
#.#....###

Tile 2647:
.###.#.###
#........#
#....#..##
........#.
##....##.#
##....##..
....#..#.#
...#.....#
##.......#
##.#...#.#

Tile 1423:
####.#....
#.....#...
#.#....#.#
...#.....#
..#.......
#.#.......
##..#....#
##.##.#...
#...#.....
...#.##.##

Tile 2767:
..#.##..##
#...#..#.#
#.#....#..
#.......#.
.......#..
.#...#.#.#
.##.#..#..
.....##..#
#.......##
##....####

Tile 2203:
.#...##.##
#.##...#.#
.#........
...#.##..#
###....###
.#.....#.#
#.#.##...#
...#.#.#..
.....#....
#.####.##.

Tile 1667:
....#.##.#
#..#...#..
.#...#...#
.#........
.#........
...#.....#
..#..#...#
##...####.
.#.....#..
#..#......

Tile 2633:
.#.#######
#..###....
........#.
#.........
.....##.#.
#.#......#
#.#.......
..##.....#
....##....
.#..####.#

Tile 3539:
####.##..#
..##....#.
..#.#.##.#
...#.....#
#.........
.......#.#
...#....#.
###..####.
.##......#
..#..#####

Tile 2381:
.######...
##..###...
#......#.#
........##
.#.....#.#
##..##...#
.#.......#
#.........
...##....#
....##...#

Tile 1153:
..##.##..#
.....##.#.
.....##...
..#.....##
##.#..#...
#.....#..#
#....#..#.
#....#.#..
..#..#..#.
.#.##.....

Tile 2011:
#.##..#...
#.##.....#
...#..#...
###.......
#....#..#.
..##......
##..#..#..
..##....##
#..#..#...
##.####..#

Tile 2731:
........#.
#........#
##.#.....#
#.....##..
#.....#...
#.#......#
...#.###.#
#.#.#....#
.#.#...#.#
#...###..#

Tile 3643:
.#...#.###
..#...#..#
#....##..#
...##.#.#.
.#.....#..
...#.##..#
.####.##..
#..#..####
....#....#
####.####.

Tile 2917:
..########
#......#.#
#..#.#..##
#...#...##
#..##....#
...#..#...
..#......#
...#...#.#
#.....#..#
.#.#..####

Tile 1951:
#.#.#..##.
..........
..#.#.#.##
#.#.......
.#..#...##
...##..#.#
#...#..#..
.#..#.....
#.#.....##
.#####....

Tile 2593:
..#####.#.
.#...#....
##..###..#
###.##..##
.#....##.#
.#..##....
#.#..#..##
.....#....
.....#...#
.####..#..

Tile 2953:
..#..#.#.#
...#..#...
##.....#.#
......#..#
#........#
..#..#...#
#.........
###.#.##..
##..#..#..
.###.#..#.

Tile 3769:
......#...
.#.##.#...
.##......#
##........
#.....###.
....#...#.
..........
#.....#.##
..........
.##..##.##

Tile 2423:
####..#.##
.#..##....
#.#.#.....
.........#
..........
..#..#....
.#.#..#..#
#.........
#..#..#...
##.#......

Tile 3329:
..#####.#.
.#....##.#
###..#####
##...#...#
#.........
#.........
...#.#...#
....#...##
#...#.#...
#.........

Tile 1249:
..#..###.#
......#.#.
##...#....
..........
##.......#
#......#.#
#..#.#..##
.#.......#
###....#.#
.##.....#.

Tile 3343:
##..#...#.
##.#..####
........#.
...#......
......#...
#.....#...
.#.#.#....
......##.#
..#.##...#
.#.#..####

Tile 2017:
##.##.#.##
...#......
.....##.#.
..#...#...
#.#....#..
#....#...#
#....#...#
#...##....
.....#.#.#
....#.#.#.

Tile 1151:
##..##....
..##.....#
#.####.##.
...##....#
..##.....#
....#....#
.#.##...##
......#..#
#..#.#.#..
#.###...##

Tile 3697:
###.....#.
..##...##.
......#.#.
.#...#.#.#
.#...#...#
.#.....#..
#...#.#...
#..#....#.
.#..##...#
..#.#.##..

Tile 1487:
..#####.##
#.........
#.#...#.##
##.##.....
.##.#....#
..#....###
#.........
..#.......
#.##..#...
.####..##.

Tile 1481:
..#..#..##
#.#..#.##.
#..##....#
##.....#..
.#...##.##
.#......#.
..#..##...
###...###.
..#...##..
#...##.#..

Tile 2903:
#..#...###
#..#####.#
..#.......
###..###..
.#........
#.#.#....#
..#..#.###
##..#.##..
...#......
.##.##.#..

Tile 1171:
.###..####
....#..#..
....#..#.#
#.....##.#
##...##...
#..#.##.#.
##..##...#
#..##.#.#.
#.#..##.#.
##.##....#

Tile 2621:
#...###.##
.#.....##.
.#..#...#.
...#..#.##
.#..##..#.
##..#..##.
...##...#.
.#..#...##
....#....#
...##.####

Tile 2671:
...#####..
........##
#....##..#
##........
##..##.#..
..#.....#.
#.........
..##.....#
##....#.##
###.#...##

Tile 2357:
.##.##....
#...#....#
...##..#.#
#.##...#..
##.###..##
..#..#####
...#.###.#
...##....#
..#.####.#
#..##..###

Tile 3617:
...##.#...
#####..#.#
....#....#
......#..#
#...#.....
...##....#
....#.....
#..#...##.
#...#...#.
....##...#

Tile 3517:
#.#..#..#.
#......#.#
.#.#..#.##
...##...#.
#.##..##..
...#..#.##
#...#.##..
.#..#..#.#
....#...##
..###.###.

Tile 1499:
.#..#....#
...#.##..#
#...#..#..
..##...#..
#....#.#.#
#..#.#..##
##.##..#.#
.##.#..#.#
#.###..##.
##.##.#.#.

Tile 3581:
###.#.###.
.#..#....#
###....##.
..#.#...##
##..#..#..
.....##...
........#.
.#.....##.
#.#...##..
###.#.#..#

Tile 2687:
.#####...#
.......#..
.#..#....#
...#......
##....#..#
#.#..#..#.
##..#.#.#.
..#....###
.#........
#...#..#..

Tile 1657:
...#...#.#
.#.##.#..#
....#...#.
...##.##..
....#.#.##
#..#..#.#.
...#.#.#..
...##....#
#...#.#..#
.##.##...#

Tile 3449:
#.....###.
#..#.....#
#......##.
....#.....
##....#...
.....#...#
..........
#......###
.#....#...
###...#...

Tile 3797:
#.#######.
..#.##.###
...#.#...#
##.##.##.#
#.......#.
.#......##
##...#####
..#.##.###
#.#.##...#
##..#.#.#.

Tile 1511:
#.###.###.
.##.#....#
........##
##..#..#..
..#####.##
.....#....
.......#..
...#......
##........
...#.#####

Tile 2311:
..#.####..
......#..#
.###..#.#.
##..#.###.
...#...#..
.......###
##.#......
.####...##
##.##..###
#...#..###

Tile 1123:
.##.##....
#....##...
#..#.....#
#........#
....#.....
#...##.#.#
#.#.##..##
...#...##.
#..#...#..
##.#.#.###
"""

    silver_tests = ["""Tile 2311:
..##.#..#.
##..#.....
#...##..#.
####.#...#
##.##.###.
##...#.###
.#.#.#..##
..#....#..
###...#.#.
..###..###

Tile 1951:
#.##...##.
#.####...#
.....#..##
#...######
.##.#....#
.###.#####
###.##.##.
.###....#.
..#.#..#.#
#...##.#..

Tile 1171:
####...##.
#..##.#..#
##.#..#.#.
.###.####.
..###.####
.##....##.
.#...####.
#.##.####.
####..#...
.....##...

Tile 1427:
###.##.#..
.#..#.##..
.#.##.#..#
#.#.#.##.#
....#...##
...##..##.
...#.#####
.#.####.#.
..#..###.#
..##.#..#.

Tile 1489:
##.#.#....
..##...#..
.##..##...
..#...#...
#####...#.
#..#.#.#.#
...#.#.#..
##.#...##.
..##.##.##
###.##.#..

Tile 2473:
#....####.
#..#.##...
#.##..#...
######.#.#
.#...#.#.#
.#########
.###.#..#.
########.#
##...##.#.
..###.#.#.

Tile 2971:
..#.#....#
#...###...
#.#.###...
##.##..#..
.#####..##
.#..####.#
#..#.#..#.
..####.###
..#.#.###.
...#.#.#.#

Tile 2729:
...#.#.#.#
####.#....
..#.#.....
....#..#.#
.##..##.#.
.#.####...
####.#.#..
##.####...
##..#.##..
#.##...##.

Tile 3079:
#.#.#####.
.#..######
..#.......
######....
####.#..#.
.#...#.##.
#.#####.##
..#.###...
..#.......
..#.###...""",""""""]

    gold_tests = ["""""",""""""]

    answer = AocDay20(data,silver_tests,gold_tests,argv)

    print(answer)
