#!/usr/bin/env python3 
from collections import deque
from sys import argv
from aoc import AocDay

class AocDay20(AocDay):
    DIRS = ((0,1),(0,-1),(1,0),(-1,0))

    def bfs(spaces,start):
        todo = deque([(start,0)])
        dists = {}
        while todo:
            pos,dist = todo.popleft()
            if pos in dists: continue
            dists[pos] = dist
            for dx,dy in AocDay20.DIRS:
                if (nxt := (pos[0]+dx, pos[1]+dy)) in spaces:
                    todo.append((nxt,dist+1))
        return dists

    def parser(self,data):
        grid = data.splitlines()
        spaces = set()
        for y,row in enumerate(grid[1:-1],start=1):
            for x,cell in enumerate(row[1:-1],start=1):
                pos = (x,y)
                if cell == "S": start = pos
                elif cell == "E": end = pos
                if cell != "#": spaces.add(pos) 

        startdists = AocDay20.bfs(spaces,start)
        enddists = AocDay20.bfs(spaces,end)
        assert(startdists[end] == enddists[start])
        shortest = startdists[end]
        return shortest,spaces,startdists,enddists

    def manhatten(maxcheat):
        for dx in range(-maxcheat,maxcheat+1):
            yrange = maxcheat - abs(dx)
            for dy in range(-yrange,yrange+1):
                yield (dx,dy)

    def count_cheats(self,data,maxcheat):
        shortest,spaces,startdists,enddists = self.parser(data)
        result = 0
        for cheaton in spaces:
            start = startdists[cheaton]
            for dx,dy in AocDay20.manhatten(maxcheat):
                if (cheatoff := (cheaton[0]+dx,cheaton[1]+dy)) not in spaces: continue
                pathlen = start + enddists[cheatoff] + abs(dx) + abs(dy)
                if shortest - pathlen >= 100:
                    result += 1

        return result

    run_silver = lambda self,data: self.count_cheats(data,2)
    run_gold = lambda self,data: self.count_cheats(data,20)

if __name__ == "__main__":

    silver_tests = ["""###############
#...#...#.....#
#.#.#.#.#.###.#
#S#...#.#.#...#
#######.#.#.###
#######.#.#...#
#######.#.###.#
###..E#...#...#
###.#######.###
#...###...#...#
#.#####.#.###.#
#.#...#.#.#...#
#.#.#.#.#.#.###
#...#...#...###
###############""",""""""]

    gold_tests = ["""""",""""""]

    data = """#############################################################################################################################################
#.......###...#...###.....###...#...#.......#...#.............###.......#...#####.........#.....#...........###.......#...#.....#...###...###
#.#####.###.#.#.#.###.###.###.#.#.#.#.#####.#.#.#.###########.###.#####.#.#.#####.#######.#.###.#.#########.###.#####.#.#.#.###.#.#.###.#.###
#.#...#.....#...#...#...#.....#.#.#.#...#...#.#.#...........#.#...#.....#.#...#...#.....#.#.#...#.....#.....#...#.....#.#.#.#...#.#...#.#...#
#.#.#.#############.###.#######.#.#.###.#.###.#.###########.#.#.###.#####.###.#.###.###.#.#.#.#######.#.#####.###.#####.#.#.#.###.###.#.###.#
#...#.........#...#...#...#...#...#.#...#.#...#...###...###.#.#.#...#...#.#...#.....#...#.#.#...#...#.#...###...#.....#.#.#.#...#.#...#...#.#
#############.#.#.###.###.#.#.#####.#.###.#.#####.###.#.###.#.#.#.###.#.#.#.#########.###.#.###.#.#.#.###.#####.#####.#.#.#.###.#.#.#####.#.#
###...###...#...#.#...###...#...#...#...#...#.....#...#.....#...#.....#.#.#.......###...#...#...#.#.#...#.#...#.#.....#.#...#...#.#.#...#.#.#
###.#.###.#.#####.#.###########.#.#####.#####.#####.###################.#.#######.#####.#####.###.#.###.#.#.#.#.#.#####.#####.###.#.#.#.#.#.#
#...#.....#.#.....#.......#...#.#.#...#.....#.#...#.........#.....#.....#.#.......#...#.#.....#...#.###.#...#.#.#.#...#...#...###.#.#.#.#.#.#
#.#########.#.###########.#.#.#.#.#.#.#####.#.#.#.#########.#.###.#.#####.#.#######.#.#.#.#####.###.###.#####.#.#.#.#.###.#.#####.#.#.#.#.#.#
#.........#.#.........#...#.#...#...#.#.....#.#.#.....###...#...#...#...#.#...#...#.#...#.#...#...#.#...#.....#.#.#.#.###.#.#...#.#...#...#.#
#########.#.#########.#.###.#########.#.#####.#.#####.###.#####.#####.#.#.###.#.#.#.#####.#.#.###.#.#.###.#####.#.#.#.###.#.#.#.#.#########.#
#.........#.#.........#.....#.....#...#.....#.#...#...#...#.....#...#.#.#.#...#.#.#...#...#.#.###.#.#.#...###...#.#.#...#.#.#.#.#.#.........#
#.#########.#.###############.###.#.#######.#.###.#.###.###.#####.#.#.#.#.#.###.#.###.#.###.#.###.#.#.#.#####.###.#.###.#.#.#.#.#.#.#########
#.........#.#...............#.#...#.###.....#.....#...#...#.#...#.#...#.#.#...#.#...#.#.#...#.#...#...#.....#...#.#.#...#.#.#.#.#.#.....#...#
#########.#.###############.#.#.###.###.#############.###.#.#.#.#.#####.#.###.#.###.#.#.#.###.#.###########.###.#.#.#.###.#.#.#.#.#####.#.#.#
#.....#...#.#...#...#...###...#...#...#.............#.#...#...#.#.#.....#.#...#...#.#.#.#...#.#...#.........#...#...#.#...#.#.#...#...#...#.#
#.###.#.###.#.#.#.#.#.#.#########.###.#############.#.#.#######.#.#.#####.#.#####.#.#.#.###.#.###.#.#########.#######.#.###.#.#####.#.#####.#
#.#...#...#.#.#.#.#...#.#...#.....#...#.........#...#.#.....#...#.#.....#.#...#...#...#...#.#.#...#.#...#.....#.....#.#...#...#.....#.....#.#
#.#.#####.#.#.#.#.#####.#.#.#.#####.###.#######.#.###.#####.#.###.#####.#.###.#.#########.#.#.#.###.#.#.#.#####.###.#.###.#####.#########.#.#
#.#.....#.#.#.#.#.....#.#.#.#.....#.###.....#...#...#.#...#.#.###.#.....#.#...#.....#.....#.#.#...#.#.#.#...#...###...#...#...#...#.....#...#
#.#####.#.#.#.#.#####.#.#.#.#####.#.#######.#.#####.#.#.#.#.#.###.#.#####.#.#######.#.#####.#.###.#.#.#.###.#.#########.###.#.###.#.###.#####
#.....#...#.#.#.#...#.#.#.#.#...#.#...#...#.#.#.....#.#.#...#.....#...#...#.....###.#.....#.#...#.#.#.#.#...#.....###...#...#...#...#...#...#
#####.#####.#.#.#.#.#.#.#.#.#.#.#.###.#.#.#.#.#.#####.#.#############.#.#######.###.#####.#.###.#.#.#.#.#.#######.###.###.#####.#####.###.#.#
#...#.#...#...#...#...#...#...#.#...#.#.#.#.#.#.#...#.#...#...........#.....#...#...#.....#...#...#.#.#...#.......#...#...#...#.....#...#.#.#
#.#.#.#.#.#####################.###.#.#.#.#.#.#.#.#.#.###.#.###############.#.###.###.#######.#####.#.#####.#######.###.###.#.#####.###.#.#.#
#.#...#.#.......#.............#...#.#.#.#.#.#...#.#...#...#.......#...#...#.#...#...#.#.....#.....#.#.#.....#.....#.#...#...#.....#.....#.#.#
#.#####.#######.#.###########.###.#.#.#.#.#.#####.#####.#########.#.#.#.#.#.###.###.#.#.###.#####.#.#.#.#####.###.#.#.###.#######.#######.#.#
#.#...#.#.......#.###...#...#.#...#.#.#.#.#...#...#...#...#.....#.#.#.#.#.#...#...#.#.#.#...#...#.#.#.#.#...#...#.#.#...#.......#.......#.#.#
#.#.#.#.#.#######.###.#.#.#.#.#.###.#.#.#.###.#.###.#.###.#.###.#.#.#.#.#.###.###.#.#.#.#.###.#.#.#.#.#.#.#.###.#.#.###.#######.#######.#.#.#
#...#...#.........#...#...#...#...#.#.#.#...#.#.#...#...#.#...#...#.#...#.#...#...#.#.#.#...#.#...#.#.#.#.#.....#...#...###.....#.......#.#.#
###################.#############.#.#.#.###.#.#.#.#####.#.###.#####.#####.#.###.###.#.#.###.#.#####.#.#.#.###########.#####.#####.#######.#.#
#.....###...###...#.........#...#...#.#.#...#.#.#.#.....#.#...#...#.#.....#...#.###.#.#.#...#...#...#.#.#.#...........#...#...#...#...#...#.#
#.###.###.#.###.#.#########.#.#.#####.#.#.###.#.#.#.#####.#.###.#.#.#.#######.#.###.#.#.#.#####.#.###.#.#.#.###########.#.###.#.###.#.#.###.#
#...#.....#.....#.#.....###...#.....#.#.#...#.#.#.#...#...#...#.#.#.#.#...#...#...#.#...#.#...#.#.#...#...#...#...#.....#.....#...#.#.#.#...#
###.#############.#.###.###########.#.#.###.#.#.#.###.#.#####.#.#.#.#.#.#.#.#####.#.#####.#.#.#.#.#.#########.#.#.#.#############.#.#.#.#.###
###.............#.#...#.......#.....#.#...#.#.#.#.#...#.....#.#.#...#.#.#.#...###.#...#...#.#...#...#.........#.#.#.#...........#...#...#...#
###############.#.###.#######.#.#####.###.#.#.#.#.#.#######.#.#.#####.#.#.###.###.###.#.###.#########.#########.#.#.#.#########.###########.#
#...#...#...#...#.....#.......#.....#.....#.#.#.#.#...#.....#...###...#.#.#...#...#...#...#.......#...#.........#...#.#...#...#.........#...#
#.#.#.#.#.#.#.#########.###########.#######.#.#.#.###.#.###########.###.#.#.###.###.#####.#######.#.###.#############.#.#.#.#.#########.#.###
#.#.#.#.#.#.#.........#.....###...#.......#.#.#.#...#.#.......###...#...#.#.#...#...#####...#.....#.....#...........#...#...#...#...###...###
#.#.#.#.#.#.#########.#####.###.#.#######.#.#.#.###.#.#######.###.###.###.#.#.###.#########.#.###########.#########.###########.#.#.#########
#.#...#.#.#.#...#.....#.....#...#.#...#...#...#.#...#...#.....#...#...###...#...#.....#####.#.#.........#.........#.#.........#...#.........#
#.#####.#.#.#.#.#.#####.#####.###.#.#.#.#######.#.#####.#.#####.###.###########.#####.#####.#.#.#######.#########.#.#.#######.#############.#
#.....#.#.#...#.#.....#.....#...#...#.#...#.....#.#.....#.#...#...#.#...#.......#...#...#...#.#.#.....#...........#.#.......#...#...#.......#
#####.#.#.#####.#####.#####.###.#####.###.#.#####.#.#####.#.#.###.#.#.#.#.#######.#.###.#.###.#.#.###.#############.#######.###.#.#.#.#######
#.....#.#.....#.......#...#...#.....#.....#.....#.#.....#...#...#.#...#.#.....#...#.#...#...#.#.#.#...#...#.....###.......#.#...#.#.#.......#
#.#####.#####.#########.#.###.#####.###########.#.#####.#######.#.#####.#####.#.###.#.#####.#.#.#.#.###.#.#.###.#########.#.#.###.#.#######.#
#.....#.#...#...#.....#.#.#...#...#.........#...#.....#.#.......#.#.....#.....#...#.#.#...#.#.#...#.....#...#...#...#...#...#.....#.........#
#####.#.#.#.###.#.###.#.#.#.###.#.#########.#.#######.#.#.#######.#.#####.#######.#.#.#.#.#.#.###############.###.#.#.#.#####################
#.....#...#...#.#.#...#.#.#.....#.......#...#...#...#.#.#.......#.#.....#.......#.#.#.#.#.#...###...#.......#.....#...#.........#...###.....#
#.###########.#.#.#.###.#.#############.#.#####.#.#.#.#.#######.#.#####.#######.#.#.#.#.#.#######.#.#.#####.###################.#.#.###.###.#
#.....#...#...#...#.....#...#.........#.#.....#.#.#...#.....#...#.#...#.......#...#...#.#.#...#...#...#...#.....#...#...........#.#.....#...#
#####.#.#.#.###############.#.#######.#.#####.#.#.#########.#.###.#.#.#######.#########.#.#.#.#.#######.#.#####.#.#.#.###########.#######.###
#...#...#.#.....#...........#.#.......#.......#.#.....###...#.###.#.#.#.......###...###.#.#.#.#...#.....#.....#.#.#.#...#...#...#.#...#...###
#.#.#####.#####.#.###########.#.###############.#####.###.###.###.#.#.#.#########.#.###.#.#.#.###.#.#########.#.#.#.###.#.#.#.#.#.#.#.#.#####
#.#.#...#.....#.#.......#...#.#.#...###.......#.#...#...#...#...#...#.#...###...#.#.#...#...#.#...#.#.........#...#.....#.#...#...#.#...#...#
#.#.#.#.#####.#.#######.#.#.#.#.#.#.###.#####.#.#.#.###.###.###.#####.###.###.#.#.#.#.#######.#.###.#.###################.#########.#####.#.#
#.#...#.....#.#.#...###...#...#...#...#.#.....#...#...#...#...#.....#.....#...#...#...#...#...#...#.#...........###.....#.#.........#...#.#.#
#.#########.#.#.#.#.#################.#.#.###########.###.###.#####.#######.###########.#.#.#####.#.###########.###.###.#.#.#########.#.#.#.#
#...#.....#...#...#...........#.......#.#.....#...###...#...#.#...#.....#...#...........#.#...###...#.........#...#...#...#.......###.#...#.#
###.#.###.###################.#.#######.#####.#.#.#####.###.#.#.#.#####.#.###.###########.###.#######.#######.###.###.###########.###.#####.#
###...###...#.....#...#.....#...#...###.#.....#.#.#...#.#...#.#.#.#...#.#...#.#...........#...#...###.......#.#...###.#.........#.....#...#.#
###########.#.###.#.#.#.###.#####.#.###.#.#####.#.#.#.#.#.###.#.#.#.#.#.###.#.#.###########.###.#.#########.#.#.#####.#.#######.#######.#.#.#
#...........#.###...#...###.......#.....#.......#...#.#.#...#.#.#...#.#.#...#.#.........#...#...#...#.......#...#S....#...#...#...#...#.#.#.#
#.###########.#######################################.#.###.#.#.#####.#.#.###.#########.#.###.#####.#.###################.#.#.###.#.#.#.#.#.#
#...#...#...#.....#.......#...........#...#...#...#...#...#.#.#...#...#.#.#...#.........#.###.....#.#.....#########.....#...#...#...#.#.#...#
###.#.#.#.#.#####.#.#####.#.#########.#.#.#.#.#.#.#.#####.#.#.###.#.###.#.#.###.#########.#######.#.#####.#########.###.#######.#####.#.#####
###...#.#.#.#...#.#.....#.#.........#.#.#.#.#...#...#...#.#.#.....#.#...#...#...#.......#...###...#.......#######...###.#.....#...###...#...#
#######.#.#.#.#.#.#####.#.#########.#.#.#.#.#########.#.#.#.#######.#.#######.###.#####.###.###.#################.#####.#.###.###.#######.#.#
#.......#.#.#.#...#.....#...........#...#.#.#.........#.#...#...###...###...#.....#...#...#.....#...#############.....#.#.###...#...###...#.#
#.#######.#.#.#####.#####################.#.#.#########.#####.#.#########.#.#######.#.###.#######.#.#################.#.#.#####.###.###.###.#
#.......#.#.#...#...#.................###...#.#.........#...#.#.#...###...#...#.....#.###...#.....#.###.....#.....#...#...#...#...#.....#...#
#######.#.#.###.#.###.###############.#######.#.#########.#.#.#.#.#.###.#####.#.#####.#####.#.#####.###.###.#.###.#.#######.#.###.#######.###
#...###...#...#.#.#...#...#...........#...###.#.#.....###.#.#.#.#.#.#...#.....#.....#.......#...#...###...#...###.#.....#...#...#...#.....###
#.#.#########.#.#.#.###.#.#.###########.#.###.#.#.###.###.#.#.#.#.#.#.###.#########.###########.#.#######.#######.#####.#.#####.###.#.#######
#.#.#...#...#.#.#...#...#...#...#.......#...#.#.#...#.#...#...#...#.#.#...#...#.....#.........#.#E#######.......#.......#...#...###...###...#
#.#.#.#.#.#.#.#.#####.#######.#.#.#########.#.#.###.#.#.###########.#.#.###.#.#.#####.#######.#.###############.###########.#.###########.#.#
#.#.#.#.#.#.#...#...#.........#...#.........#.#...#.#...#...........#.#...#.#.#.#.....#.......#...#####.......#.........#...#...#...#...#.#.#
#.#.#.#.#.#.#####.#.###############.#########.###.#.#####.###########.###.#.#.#.#.#####.#########.#####.#####.#########.#.#####.#.#.#.#.#.#.#
#.#...#...#.......#.........###...#...#...###.#...#.#.....###...#...#.#...#.#.#...#...#...........#####.....#.#...#.....#...#...#.#.#.#...#.#
#.#########################.###.#.###.#.#.###.#.###.#.#######.#.#.#.#.#.###.#.#####.#.#####################.#.#.#.#.#######.#.###.#.#.#####.#
#.#...#.....#...#...#.....#.#...#.....#.#.#...#.....#.......#.#...#.#.#...#.#.#.....#.#.....#...#...#.......#...#...###...#.#.#...#.#...#...#
#.#.#.#.###.#.#.#.#.#.###.#.#.#########.#.#.###############.#.#####.#.###.#.#.#.#####.#.###.#.#.#.#.#.#################.#.#.#.#.###.###.#.###
#.#.#.#.#...#.#...#...#...#...#.....###.#.#.....#...........#.#.....#...#.#.#.#.....#...#...#.#.#.#.#.#...#...#...#...#.#.#.#...#...###.#...#
#.#.#.#.#.###.#########.#######.###.###.#.#####.#.###########.#.#######.#.#.#.#####.#####.###.#.#.#.#.#.#.#.#.#.#.#.#.#.#.#.#####.#####.###.#
#...#...#...#.#.....###...#.....###.....#.......#.............#.....#...#...#.#.....#...#.....#.#.#.#...#...#...#...#.#.#.#...#...#...#.#...#
###########.#.#.###.#####.#.#######################################.#.#######.#.#####.#.#######.#.#.#################.#.#.###.#.###.#.#.#.###
#.......###...#...#...#...#.#.........#.....#.....#.............#...#...#.....#.......#.......#.#.#...#...........#...#.#.#...#.#...#...#...#
#.#####.#########.###.#.###.#.#######.#.###.#.###.#.###########.#.#####.#.###################.#.#.###.#.#########.#.###.#.#.###.#.#########.#
#.....#.#...#...#...#...#...#.......#...#...#.#...#.....#.....#...#.....#.......#...#.........#.#.#...#.........#...#...#...#...#.#.....#...#
#####.#.#.#.#.#.###.#####.#########.#####.###.#.#######.#.###.#####.###########.#.#.#.#########.#.#.###########.#####.#######.###.#.###.#.###
#.....#...#...#.###.....#.#...#...#.....#.....#.#...#...#...#.#...#.....#.......#.#.#.........#.#.#...........#.......#.....#.....#...#.#...#
#.#############.#######.#.#.#.#.#.#####.#######.#.#.#.#####.#.#.#.#####.#.#######.#.#########.#.#.###########.#########.###.#########.#.###.#
#.........#...#.........#.#.#...#.......#...###...#...#####.#.#.#...#...#...#...#.#.#...#...#.#.#...#.....###...#.....#.###...#...#...#.....#
#########.#.#.###########.#.#############.#.###############.#.#.###.#.#####.#.#.#.#.#.#.#.#.#.#.###.#.###.#####.#.###.#.#####.#.#.#.#########
#.........#.#...#...#...#.#...........#...#.#...#...#...#...#.#.#...#...#...#.#...#.#.#...#.#.#.###...###.....#.#...#.#.....#...#.#.#.......#
#.#########.###.#.#.#.#.#.###########.#.###.#.#.#.#.#.#.#.###.#.#.#####.#.###.#####.#.#####.#.#.#############.#.###.#.#####.#####.#.#.#####.#
#.....#.....###...#...#...###.........#...#.#.#.#.#.#.#.#...#.#.#.#...#.#.###.....#.#.....#.#.#.#...#.........#.#...#.....#.....#.#...#.....#
#####.#.#####################.###########.#.#.#.#.#.#.#.###.#.#.#.#.#.#.#.#######.#.#####.#.#.#.#.#.#.#########.#.#######.#####.#.#####.#####
#.....#.#.....#.......#...#...#.......#...#.#.#.#.#.#.#.#...#.#.#...#.#.#.#...#...#.....#.#...#.#.#.#.#.......#...#...###.....#.#.....#.....#
#.#####.#.###.#.#####.#.#.#.###.#####.#.###.#.#.#.#.#.#.#.###.#.#####.#.#.#.#.#.#######.#.#####.#.#.#.#.#####.#####.#.#######.#.#####.#####.#
#.#...#.#...#...#...#...#.#...#.#.....#.#...#.#.#.#.#.#.#.#...#.#.....#.#.#.#.#.......#.#...#...#.#.#...#...#.......#.......#...#.....#.....#
#.#.#.#.###.#####.#.#####.###.#.#.#####.#.###.#.#.#.#.#.#.#.###.#.#####.#.#.#.#######.#.###.#.###.#.#####.#.###############.#####.#####.#####
#...#...###...#...#.....#.###.#.#...#...#...#.#...#.#.#...#...#.#.....#.#.#.#...#.....#.#...#...#.#.#...#.#.#...#.....#...#.....#.....#.....#
#############.#.#######.#.###.#.###.#.#####.#.#####.#.#######.#.#####.#.#.#.###.#.#####.#.#####.#.#.#.#.#.#.#.#.#.###.#.#.#####.#####.#####.#
#.....#...###...#.......#.....#...#...#.....#.#.....#.....#...#.....#.#.#.#...#.#.#.....#...#...#.#.#.#...#.#.#.#...#.#.#.....#...#...#.....#
#.###.#.#.#######.###############.#####.#####.#.#########.#.#######.#.#.#.###.#.#.#.#######.#.###.#.#.#####.#.#.###.#.#.#####.###.#.###.#####
#...#.#.#.#.....#.........#...#...#...#.#.....#.#...#...#.#...#...#.#.#.#...#.#...#.....#...#...#.#.#.....#.#.#.#...#.#.....#...#.#...#.....#
###.#.#.#.#.###.#########.#.#.#.###.#.#.#.#####.#.#.#.#.#.###.#.#.#.#.#.###.#.#########.#.#####.#.#.#####.#.#.#.#.###.#####.###.#.###.#####.#
#...#...#...#...#...#...#.#.#.#.#...#...#.#.....#.#.#.#...###.#.#...#.#.###...#.........#...#...#.#...#...#.#.#.#.###...#...###...###...#...#
#.###########.###.#.#.#.#.#.#.#.#.#######.#.#####.#.#.#######.#.#####.#.#######.###########.#.###.###.#.###.#.#.#.#####.#.#############.#.###
#...........#.#...#...#...#.#...#.#.....#.#...#...#...###.....#.....#.#.....###.....#.....#.#.#...###.#...#.#.#.#.....#.#...###...#...#.#...#
###########.#.#.###########.#####.#.###.#.###.#.#########.#########.#.#####.#######.#.###.#.#.#.#####.###.#.#.#.#####.#.###.###.#.#.#.#.###.#
#.....#.....#...#...#...#...#.....#...#...###.#.........#.#...#...#.#...#...#.....#.#.###.#.#.#.....#.#...#.#.#.#...#.#.#...#...#...#.#.#...#
#.###.#.#########.#.#.#.#.###.#######.#######.#########.#.#.#.#.#.#.###.#.###.###.#.#.###.#.#.#####.#.#.###.#.#.#.#.#.#.#.###.#######.#.#.###
#.#...#.....#...#.#.#.#.#.#...#.......#.......#...#...#.#.#.#.#.#...#...#.###...#...#...#.#.#...#...#.#...#.#.#.#.#...#.#.....#...#...#.#...#
#.#.#######.#.#.#.#.#.#.#.#.###.#######.#######.#.#.#.#.#.#.#.#.#####.###.#####.#######.#.#.###.#.###.###.#.#.#.#.#####.#######.#.#.###.###.#
#.#.###...#.#.#.#.#.#.#.#.#...#.......#...#...#.#.#.#.#.#...#.#.....#...#.#.....#...#...#.#.###.#...#.#...#...#.#.....#.#...#...#.#.###...#.#
#.#.###.#.#.#.#.#.#.#.#.#.###.#######.###.#.#.#.#.#.#.#.#####.#####.###.#.#.#####.#.#.###.#.###.###.#.#.#######.#####.#.#.#.#.###.#.#####.#.#
#.#.....#...#.#.#.#.#.#...#...#.....#.#...#.#.#.#...#...###...#...#...#.#.#.....#.#.#.#...#...#.....#.#.......#.#...#.#...#.#...#.#.....#.#.#
#.###########.#.#.#.#.#####.###.###.#.#.###.#.#.###########.###.#.###.#.#.#####.#.#.#.#.#####.#######.#######.#.#.#.#.#####.###.#.#####.#.#.#
#...#.....#...#.#.#.#.###...#...###...#.#...#.#...#.........#...#.#...#.#.#.....#.#.#.#.#...#.#...###.....#...#.#.#.#.###...#...#.#.....#...#
###.#.###.#.###.#.#.#.###.###.#########.#.###.###.#.#########.###.#.###.#.#.#####.#.#.#.#.#.#.#.#.#######.#.###.#.#.#.###.###.###.#.#########
#...#.#...#...#...#.#.#...#...#.........#...#.....#.....#...#.#...#...#.#.#.....#.#.#.#.#.#.#...#.......#.#...#.#.#.#.#...#...###...#...#...#
#.###.#.#####.#####.#.#.###.###.###########.###########.#.#.#.#.#####.#.#.#####.#.#.#.#.#.#.###########.#.###.#.#.#.#.#.###.#########.#.#.#.#
#...#.#.#...#.....#.#.#...#...#.......#...#...#.......#.#.#.#.#...#...#...#...#.#.#...#.#.#.#...#.......#.#...#.#.#...#...#...........#...#.#
###.#.#.#.#.#####.#.#.###.###.#######.#.#.###.#.#####.#.#.#.#.###.#.#######.#.#.#.#####.#.#.#.#.#.#######.#.###.#.#######.#################.#
###.#.#.#.#.......#.#.#...#...#.......#.#.#...#.#...#...#.#.#.###.#...#.....#...#...#...#.#...#.#.......#...#...#.###...#.#...#...#...#.....#
###.#.#.#.#########.#.#.###.###.#######.#.#.###.#.#.#####.#.#.###.###.#.###########.#.###.#####.#######.#####.###.###.#.#.#.#.#.#.#.#.#.#####
#...#.#.#.........#...#...#...#.#...#...#.#.###...#...#...#...#...#...#.......#.....#...#...#...#.....#.....#...#.....#.#...#.#.#.#.#.#.....#
#.###.#.#########.#######.###.#.#.#.#.###.#.#########.#.#######.###.#########.#.#######.###.#.###.###.#####.###.#######.#####.#.#.#.#.#####.#
#.#...#...#.......#...###.#...#.#.#...#...#.#.........#.......#...#...#.......#...#.....#...#.#...###.#.....#...#...#...###...#.#.#.#.#.....#
#.#.#####.#.#######.#.###.#.###.#.#####.###.#.###############.###.###.#.#########.#.#####.###.#.#####.#.#####.###.#.#.#####.###.#.#.#.#.#####
#.#...#...#.......#.#...#.#...#.#...###...#.#.#...#.....#.....#...#...#.#...#.....#...#...#...#.....#.#.....#...#.#.#.#...#.#...#...#.#.....#
#.###.#.#########.#.###.#.###.#.###.#####.#.#.#.#.#.###.#.#####.###.###.#.#.#.#######.#.###.#######.#.#####.###.#.#.#.#.#.#.#.#######.#####.#
#...#.#...#...#...#...#...#...#.#...#.....#.#.#.#.#...#.#.#.....#...#...#.#.#.#.......#.#...#...#...#.#...#...#.#.#.#...#.#.#.#.......#...#.#
###.#.###.#.#.#.#####.#####.###.#.###.#####.#.#.#.###.#.#.#.#####.###.###.#.#.#.#######.#.###.#.#.###.#.#.###.#.#.#.#####.#.#.#.#######.#.#.#
###...###...#...#####.......###...###.......#...#.....#...#.......###.....#...#.........#.....#...###...#.....#...#.......#...#.........#...#
#############################################################################################################################################"""

    answer = AocDay20(data,silver_tests,gold_tests,argv)

    print(answer)
